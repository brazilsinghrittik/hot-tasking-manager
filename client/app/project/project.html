<div>
    <section class="section__header page__project">
        <div class="inner">
            <div ng-hide="projectCtrl.loaded">
                <p>{{ 'Loading...' | translate }}</p>
            </div>
            <div ng-show="projectCtrl.loaded && projectCtrl.errorGetProject === false">
                <div>
                    <mark>{{ projectCtrl.projectData.projectPriority }}</mark>
                    <span class="active-mappers">{{ projectCtrl.projectData.activeMappers}} - Active Mappers</span>
                </div>
                <div class="header--withShare">
                    <div class="section__header--left">
                        <h2 class="section__title">
                            #{{ projectCtrl.projectData.projectId }}
                            - {{ projectCtrl.projectData.projectInfo.name }}
                        </h2>
                        <div ng-show="projectCtrl.user.role === 'PROJECT_MANAGER' || projectCtrl.user.role === 'ADMIN'"
                            class="edit-project-button">
                            <a ng-href="/admin/edit-project/{{ projectCtrl.id }}"
                            class="button button--secondary">{{ 'Edit project' | translate }}
                            </a>
                        </div>
                        <div ng-show="projectCtrl.user.role === 'PROJECT_MANAGER' || projectCtrl.user.role === 'ADMIN'">
                            <p>
                                {{ 'Download:' | translate }} {{ 'AoI as' | translate }}
                                <a href="/api/v1/project/{{ projectCtrl.id }}/aoi?as_file=true" target="_blank">.geojson</a>, {{ 'Tasks as' | translate }}
                                <a href="/api/v1/project/{{ projectCtrl.id }}/tasks?as_file=true" target="_blank">.geojson</a>,
                                <a href="/api/v1/project/{{ projectCtrl.id }}/tasks-as-osm-xml?as_file=true" target="_blank">.osm</a>,
                                <a href="/api/v1/project/{{ projectCtrl.id }}/tasks_as_gpx?as_file=true" target="_blank">.gpx</a>
                            </p>
                        </div>
                    </div>
                    <div class="component--share">
                        <a class="button button--outline" href=""
                        ng-click="projectCtrl.areSocialShareOptionsVisible = !projectCtrl.areSocialShareOptionsVisible">
                            Share
                        </a>
                        <div class="drop__content" ng-show="projectCtrl.areSocialShareOptionsVisible">
                        <ul class="share--options drop__menu">
                            <li>
                                <a class=""
                                        socialshare
                                        socialshare-provider="twitter"
                                        socialshare-text="I have just contributed to this project"
                                        socialshare-hashtags="hotosm"
                                        socialshare-url="{{ projectCtrl.getSocialMediaUrl() }}">
                                    Twitter
                                </a>
                            </li>
                            <li>
                                <a class=""
                                        socialshare
                                        socialshare-provider="facebook"
                                        socialshare-url="{{ projectCtrl.getSocialMediaUrl() }}">
                                    Facebook
                                </a>
                            </li>
                            <li>
                                <a class=""
                                        socialshare
                                        socialshare-provider="linkedin"
                                        socialshare-text="I have just contributed to this project"
                                        socialshare-url="{{ projectCtrl.getSocialMediaUrl() }}">
                                    LinkedIn
                                </a>
                            </li>
                        </ul>
                        </div>
                    </div>
                </div>
                <p markdown-to-html="projectCtrl.projectData.projectInfo.description"></p>
                <dl>
                    <dt>{{ 'Status:' | translate }} </dt>
                    <dd>{{ projectCtrl.projectData.projectStatus }}</dd>

                    <dt>{{ 'Created by:' | translate }} </dt>
                    <dd><a href="/user/{{ projectCtrl.projectData.author }}">{{ projectCtrl.projectData.author }}</a></dd>

                    <dt>{{ 'Last updated' | translate }}: </dt>
                    <dd am-time-ago="projectCtrl.projectData.lastUpdated | amUtc | amLocal"></dd>

                    <dt>{{ 'Difficulty' | translate }}: </dt>
                    <dd>{{ projectCtrl.projectData.mapperLevel }}</dd>

                    <dt>{{ 'Priority' | translate }}: </dt>
                    <dd>{{ projectCtrl.projectData.projectPriority }}</dd>

                    <dt>{{ 'Type(s) of mapping' | translate }}: </dt>
                    <dd>
                        <span ng-repeat="type in projectCtrl.projectData.mappingTypes">{{ type }}
                            <span ng-show="!$last">| </span>
                        </span>
                    </dd>

                    <dt>{{ 'Organisation' | translate }}: </dt>
                    <dd ng-show="projectCtrl.projectData.organisationTag">{{ projectCtrl.projectData.organisationTag }}</dd>
                    <dd ng-show="!projectCtrl.projectData.organisationTag">{{ 'N/A' | translate }}</dd>

                    <dt>{{ 'Campaign' | translate }}: </dt>
                    <dd ng-show="projectCtrl.projectData.campaignTag">{{ projectCtrl.projectData.campaignTag }}</dd>
                    <dd ng-show="!projectCtrl.projectData.campaignTag">{{ 'N/A' | translate }}</dd>

                    <dt>{{ 'Mapper level required' | translate }}: </dt>
                    <dd ng-show="projectCtrl.projectData.enforceMapperLevel">{{ 'Yes' | translate }}</dd>
                    <dd ng-show="!projectCtrl.projectData.enforceMapperLevel">{{ 'No' | translate }}</dd>

                    <dt>{{ 'Validator role required' | translate }}: </dt>
                    <dd ng-show="projectCtrl.projectData.enforceValidatorRole">{{ 'Yes' | translate }}</dd>
                    <dd ng-show="!projectCtrl.projectData.enforceValidatorRole">{{ 'No' | translate }}</dd>

                </dl>
            </div>
        </div>
    </section>
    <section class="section__body section__body--secondary project-container--wrapper">
        <div class="project-container inner">
            <!-- invalid project -->
            <div ng-show="projectCtrl.errorGetProject">
                    <p class="error">{{ 'Invalid project. Please select another project.' | translate }}</p>
                        <a class="button button--secondary" href="/contribute">Contribute</a>
            </div>
            <div ng-hide="projectCtrl.errorGetProject || projectCtrl.loaded === false">
                <div class="form__group" >
                    <ul class="tab--wrapper">
                        <li ng-click="projectCtrl.currentTab = 'instructions'"
                            title="{{ 'Go to the instructions tab' | translate }}"
                            class='tab--item'
                            ng-class="projectCtrl.currentTab == 'instructions'? 'active':''">
                            <a>
                                {{ 'Instructions' | translate }}
                            </a>
                        </li>
                        <li ng-click="projectCtrl.currentTab = 'mapping'"
                            title="{{ 'Go to the mapping tab' | translate }}"
                            class='tab--item'
                            ng-class="projectCtrl.currentTab == 'mapping'? 'active':''">
                            <a>
                                {{ 'Map' | translate }}
                            </a>
                        </li>
                        <li ng-click="projectCtrl.currentTab = 'validation'"
                            title="{{ 'Go to the validation tab' | translate }}"
                            class='tab--item'
                            ng-class="projectCtrl.currentTab == 'validation'? 'active':''">
                            <a>
                                {{ 'Validate' | translate }}
                            </a>
                        </li>
                        <li ng-click="projectCtrl.currentTab = 'chat'"
                            title="{{ 'Go to the chat tab' | translate }}"
                            class='tab--item'
                            ng-class="projectCtrl.currentTab == 'chat'? 'active':''">
                            <a>
                                {{ 'Questions and Comments' | translate }}
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- side bar -->
                <div class="sidebar">
                    <!-- tabs -->
                    <div class="content">
                        <div class="instructions" ng-show="projectCtrl.currentTab === 'instructions'">
                            <section>
                                <h3>{{ 'Instructions' | translate }}</h3>
                                <div ng-show="projectCtrl.projectData.entitiesToMap" ng-init="showEntitiesHelp = false">
                                    <strong>
                                        {{ 'Entities to map' | translate }}
                                        <i ng-click="showEntitiesHelp = !showEntitiesHelp"
                                            class="hot-ds-icon-circle-question pointer">
                                        </i>
                                    </strong>
                                    <div ng-show="showEntitiesHelp">
                                        <small><em>{{ 'The list of elements we ask you to map' | translate }}</em></small>
                                    </div>
                                    <div>
                                        <code>{{ projectCtrl.projectData.entitiesToMap }}</code>
                                    </div>
                                    <hr/>
                                </div>
                                <div ng-show="projectCtrl.projectData.changesetComment"
                                        ng-init="showChangesetCommentHelp = false">
                                    <strong>
                                        {{ 'Changeset Comment' | translate }}
                                        <i ng-click="showChangesetCommentHelp = !showChangesetCommentHelp"
                                            class="hot-ds-icon-circle-question pointer">
                                        </i>
                                    </strong>
                                    <div ng-show="showChangesetCommentHelp">
                                        <small>
                                            <em>{{ 'A comment entered when you save your mapping to the OSM database. When saving your work, please leave the default comment but add what you actually mapped, for example: Added buildings and a residential road.' | translate }}
                                            </em></small>
                                    </div>
                                    <div>
                                        <code>{{ projectCtrl.projectData.changesetComment }}</code>
                                    </div>
                                    <hr/>
                                </div>
                                <div ng-show="projectCtrl.projectData.imagery" class="imagery-container">
                                    <strong>{{ 'Imagery' | translate }}</strong>
                                    <div>
                                        <code>{{ projectCtrl.projectData.imagery }}</code>
                                    </div>
                                    <hr/>
                                </div>
                                <p class="project--notes" markdown-to-html="projectCtrl.projectData.projectInfo.instructions"></p>
                                <div class="container__nextsteps">
                                    <h5 class="withDescription">Ready to get started?</h5>
                                    <p>Contribute by mapping or validating work that has already been done.</p>
                                    <button class="button"
                                            ng-click="projectCtrl.currentTab = 'mapping'">{{ 'Map' | translate }}
                                    </button>
                                    <button class="button"
                                            ng-click="projectCtrl.currentTab = 'validation'">{{ 'Validate' | translate }}
                                    </button>
                                </div>
                            </section>

                        </div>
                        <div ng-show="projectCtrl.currentTab === 'mapping'">
                            <!-- select UI -->
                            <div ng-show="projectCtrl.mappingStep === 'selecting'">
                                <div>
                                    <h3>{{ 'Choose a task' | translate }}</h3>
                                    <div ng-show="projectCtrl.lockedTasksForCurrentUser.length > 0">
                                        <div class="error"
                                                role="alert">
                                            <p>{{ 'You cannot select tasks for mapping because you already have task(s) locked.' | translate }}</p>
                                        </div>
                                        <div ng-show="projectCtrl.hasTaskLockedForMapping()" class="padding-at-bottom form__group form__group--section">
                                            <button ng-click="projectCtrl.reselectTaskForMapping()"
                                                    class="button">
                                                {{ 'Reselect tasks locked for mapping ' | translate }}
                                            </button>
                                        </div>
                                        <div ng-show="projectCtrl.hasTasksLockedForValidation()" class="padding-at-bottom">
                                            <button ng-click="projectCtrl.reselectTasksForValidation()"
                                                    class="button">
                                                {{ 'Reselect tasks locked for validation ' | translate }}
                                            </button>
                                        </div>
                                    </div>
                                    <div ng-hide="projectCtrl.lockedTasksForCurrentUser.length > 0">
                                        <div ng-hide="projectCtrl.user"
                                                class="alert"
                                                role="alert">
                                            <p>{{ 'In order to start contributing, please' | translate }} <a ng-show="!accountNavCtrl.account.username" ng-click="accountNavCtrl.login()">{{ 'login first' | translate }}</a>.</p>
                                        </div>
                                        <div ng-show="projectCtrl.user && projectCtrl.userCanMap === false"
                                                class="error"
                                                role="alert">
                                            <p>{{ 'You cannot select tasks for mapping on this project because you do not have the required mapper experience level.' | translate }}</p>
                                        </div>
                                        <div ng-show="projectCtrl.user && projectCtrl.userCanMap">
                                            <p>{{ 'Choose a task for mapping:' | translate }}</p>

                                            <dl class="definition-list--options">
                                                <dt>{{ 'Option 1:' | translate }}</dt>
                                                <dd>{{ 'Select a task by clicking on the map' | translate }}</dd>

                                                <dt>{{ 'Option 2:' | translate }}</dt>
                                                <dd>
                                                    <button ng-click="projectCtrl.selectRandomTaskMap()"
                                                            class="button pull-center">
                                                        {{ 'Select a random task' | translate }}
                                                    </button>
                                                </dd>
                                            </dl>
                                            <div ng-show="projectCtrl.taskErrorMapping === 'none-available'">
                                                <div class="" role="alert">
                                                    <p>{{ 'There are no tasks currently available for mapping.' | translate }}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.taskErrorMapping === 'task-get-error'"
                                                class="alert alert--danger"
                                                role="alert">
                                            <p class="error">{{ 'There was an error retrieving the task from the server.' | translate }}</p>
                                            <button class="alert__button-dismiss" title="{{ 'Dismiss alert' | translate }}"
                                                    ng-click="projectCtrl.clearCurrentSelection()">
                                                <span>{{ 'Dismiss' | translate }}</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- task viewing and mapping UI's -->
                            <div ng-show="projectCtrl.mappingStep === 'viewing' || projectCtrl.mappingStep === 'locked'">
                                <!-- task viewing UI -->
                                <h3 style="display: inline-block;">{{ 'Mapping' | translate }}</h3>
                                <div ng-show="projectCtrl.mappingStep === 'locked'" style="display: inline-block; float: right;">
                                    <i class="fa fa-clock-o"></i>
                                    <span>{{ projectCtrl.getLockTime() }} {{ ' left' | translate }}</span>
                                </div>
                                <div ng-show="projectCtrl.mappingStep === 'viewing' ">
                                    <!-- task information -->

                                    <div ng-show="projectCtrl.lockedTasksForCurrentUser.length > 0">
                                        <div class="error"
                                                role="alert">
                                            <p>{{ 'You cannot select tasks for mapping because you already have task(s) locked.' | translate }}</p>
                                        </div>
                                        <div ng-show="projectCtrl.hasTaskLockedForMapping()" class="padding-at-bottom form__group form__group--section">
                                            <button ng-click="projectCtrl.reselectTaskForMapping()"
                                                    class="button">
                                                {{ 'Reselect tasks locked for mapping ' | translate }}
                                            </button>
                                        </div>
                                        <div ng-show="projectCtrl.hasTasksLockedForValidation()" class="padding-at-bottom">
                                            <button ng-click="projectCtrl.reselectTasksForValidation()"
                                                    class="button">
                                                {{ 'Reselect tasks locked for validation ' | translate }}
                                            </button>
                                        </div>
                                    </div>
                                    <div ng-show="projectCtrl.user && !projectCtrl.isSelectedMappable"
                                            class="error"
                                            role="alert">
                                        <p>{{ 'The selected task is not in a state that allows mapping.' | translate }}</p>
                                    </div>
                                    <div ng-hide="projectCtrl.lockedTasksForCurrentUser.length > 0">
                                        <div ng-show="projectCtrl.taskLockError && projectCtrl.isAuthorized">
                                            <div class="error" role="alert">
                                                <p>{{ 'The task could not be locked for mapping.' | translate }} {{ projectCtrl.taskLockErrorMessage }}</p>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.wasAutoUnlocked">
                                            <div class="error" role="alert">
                                                <p>{{ 'The task expired and was automatically unlocked.' | translate }}</p>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.taskLockError && !projectCtrl.isAuthorized">
                                            <div class="alert" role="alert">
                                                <p>{{ 'In order to start contributing, please' | translate }} <a ng-show="!accountNavCtrl.account.username" ng-click="accountNavCtrl.login()">{{ 'login first' | translate }}</a>.</p>
                                            </div>
                                        </div>
                                        <div ng-hide="projectCtrl.taskLockError">
                                            <div ng-show="projectCtrl.selectedTaskData ">
                                                <div ng-show="projectCtrl.isSelectedMappable && !projectCtrl.taskLockError && projectCtrl.userCanMap"
                                                        class="alert alert--success"
                                                        role="alert">
                                                    <p>{{ 'This task is available for mapping.' | translate }}</p>
                                                </div>
                                            </div>
                                            <!-- task error alerts -->
                                            <div>
                                                <div ng-hide="projectCtrl.user">
                                                    <div class="alert" role="alert">
                                                        <p>{{ 'In order to start contributing, please' | translate }} <a ng-show="!accountNavCtrl.account.username" ng-click="accountNavCtrl.login()">{{ 'login first' | translate }}</a>.</p>
                                                    </div>
                                                </div>
                                                <div ng-show="projectCtrl.user && projectCtrl.taskLockError"
                                                        class="error"
                                                        role="alert">
                                                    <p>{{ 'The selected task could not be locked.' | translate }}</p>
                                                </div>
                                                <div ng-show="projectCtrl.user && !projectCtrl.userCanMap"
                                                        class="error"
                                                        role="alert">
                                                    <p>{{ 'You cannot select tasks for mapping on this project because you do not have the required mapper experience level.' | translate }}</p>
                                                </div>
                                                <div ng-show="projectCtrl.taskUndoError"
                                                    class="error"
                                                    role="alert">
                                                    <p>{{ 'The selected task status could not be undone.' | translate }}</p>
                                                </div>
                                            </div>

                                        </div>
                                        <!-- task action buttons -->
                                        <div class="form__group form__group--section">
                                            <div>
                                                <button ng-show="projectCtrl.isSelectedMappable && !projectCtrl.taskLockError && projectCtrl.userCanMap"
                                                        class="button button--large"
                                                        ng-click="projectCtrl.lockSelectedTaskMapping()">
                                                    {{ 'Start Mapping' | translate }}
                                                </button>
                                                <!-- <button ng-click="projectCtrl.startEditor('ideditor')"
                                                        class="button button--secondary button--large">
                                                    {{ 'Preview Task on OSM' | translate }}
                                                </button> -->
                                            </div>
                                            <div>
                                                <div class="button-group button-group--horizontal" role="group"
                                                        aria-label="{{ 'Other options' | translate }}">
                                                    <button ng-hide="projectCtrl.taskErrorMapping === 'none-available' || !projectCtrl.userCanMap"
                                                            ng-click="projectCtrl.selectRandomTaskMap()"
                                                            class="button button--achromic">
                                                        {{ 'Select another task' | translate }}
                                                    </button>
                                                    <button ng-show="projectCtrl.selectedTaskData.isUndoable"
                                                            class="button button--achromic"
                                                            ng-click="projectCtrl.undo()">
                                                        {{ 'Un-Mark' | translate }}
                                                    </button>
                                                    <!-- <button class="button button--achromic button--secondary"
                                                            ng-click="projectCtrl.resetToSelectingStep()">
                                                        {{ 'Cancel' | translate }}
                                                    </button> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- task locked UI -->
                                <div ng-show="projectCtrl.mappingStep === 'locked'"><!-- task mapping UI -->
                                    <div class="form__group form__group--section">
                                        <div ng-show="projectCtrl.selectedTaskData.perTaskInstructions">
                                            <h4>{{ 'Extra Instructions' | translate }}</h4>
                                            <p markdown-to-html="projectCtrl.selectedTaskData.perTaskInstructions"></p>
                                        </div>
                                        <div>
                                            <h6>{{ 'Get started by choosing your editor of choice.' | translate }}</h6>
                                            <div class="form__input-group">
                                                <select class="form__control form__control__medium"
                                                        ng-options="editor.value as editor.name for editor in projectCtrl.mappingEditors"
                                                        ng-model="projectCtrl.selectedMappingEditor"
                                                        ng-change="projectCtrl.updatePreferedEditor()">
                                                </select>
                                                <span class="form__input-group-button">
                                                    <button class="button button--sm"
                                                            ng-click="projectCtrl.startEditor(projectCtrl.selectedMappingEditor)">
                                                        {{ 'Start Editor' | translate }}
                                                    </button>
                                                </span>
                                            </div>
                                        </div>
                                        <div>
                                            <p><a href="{{ projectCtrl.getGpxDownloadURL() }}" target="_blank">{{ 'Download' | translate }}</a> {{ 'this task as a gpx file to see its boundary.' | translate }}</p>
                                        </div>
                                        <div ng-show="projectCtrl.editorStartError === 'josm-error'">
                                            <div class="alert alert--danger" role="alert">
                                                <button class="alert__button-dismiss" title="{{ 'Dismiss alert' | translate }}"
                                                        ng-click="projectCtrl.editorStartError = ''">
                                                    <span>{{ 'Dismiss' | translate }}</span>
                                                </button>
                                                <p>{{ 'JOSM remote control did not respond. Do you have JOSM running and configured to be controlled remotely?' | translate }}</p>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.editorStartError === 'josm-imagery-error'">
                                            <div class="alert alert--warning" role="alert">
                                                <button class="alert__button-dismiss" title="{{ 'Dismiss alert' | translate }}"
                                                        ng-click="projectCtrl.editorStartError = ''">
                                                    <span>{{ 'Dismiss' | translate }}</span>
                                                </button>
                                                <p>{{ 'JOSM had a problem loading the project imagery.' | translate }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form__group form__group--section">
                                        <div>
                                            <h6 style="width:84%">Task too big to complete quickly? Or is the satellite imagery not good? Choose split task or mark as bad imagery.</h6>
                                            
                                        </div>
                                        <ul class="list-type--none buttons--sidebyside">
                                            <li>
                                                <button id="split-task-btn" style="padding:16px" class="button button--secondary" ng-click="projectCtrl.splitTask()">
                                                    <!-- from collecticons.io-->
                                                    <?xml version="1.0" encoding="utf-8"?>
                                                    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
                                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="12px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
                                                    <path id="split-task" fill="#ffffff" d="M416,288v64h-79.6c-1.5-0.2-4.2-1.4-5.4-2.2L237.3,256l93.8-93.8c1.2-0.9,3.9-2,5.4-2.2H416v64l96-96l-96-96v64h-80
                                                        c-17.2,0-37.8,8.5-49.9,20.7L210.7,192H0v128h210.7l75.3,75.3c12.2,12.2,32.7,20.7,49.9,20.7h80v64l96-96L416,288z"/>
                                                    </svg>
                                                    <!-- <i class="icon-split"></i> -->
                                                    {{ ' Split Task' | translate }}
                                                </button>
                                            </li>
                                            <li>
                                                <div ng-show="projectCtrl.taskSplitError && projectCtrl.taskSplitCode == 403 ">
                                                    <div class="error" role="alert">
                                                        <p>{{ 'Task is not splittable' | translate }}</p>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div ng-show="projectCtrl.taskSplitError && !projectCtrl.taskSplitCode">
                                                    <div class="error" role="alert">
                                                        <p>{{ 'Task could not be split' | translate }}</p>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <button id="bad-imagery-btn" style="padding:16px" class="button button--secondary"
                                                        ng-click="projectCtrl.unLockTaskMapping(projectCtrl.comment, 'BADIMAGERY')">
                                                        <!-- <i class="icon-danger"></i> -->
                                                        <!-- from collecticons.io-->
                                                        <?xml version="1.0" encoding="utf-8"?>
                                                        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
                                                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="12px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
                                                        <path id="bad-imagery" fill="#ffffff" d="M480.2,392.4L287.8,55.6c-17.5-30.6-46-30.6-63.5,0L31.8,392.4C14.3,423,28.8,448,64,448h384
                                                            C483.2,448,497.7,423,480.2,392.4z M256,416c-22.1,0-40-17.9-40-40c0-22.1,17.9-40,40-40s40,17.9,40,40C296,398.1,278.1,416,256,416
                                                            z M288,320h-64V160h64V320z"/>
                                                        </svg>
                                                        {{ ' Mark as Bad Imagery' | translate }}
                                                </button>
                                            </li>
                                            
                                            </ul>
                                        <div>
                                            <h6 style="width:84%">Can't finish but need to stop mapping? Or have you completely mapped the area? Leave a comment and select one of the options below that matches your editing status.</h6>
                                            <div ng-include="'/app/project/comment-box.html'"></div>
                                        </div>
                                        <ul class="list-type--none buttons--sidebyside">
                                            <li>
                                                <button id="stop-mapping-btn" class="button button--secondary"
                                                        ng-click="projectCtrl.stopMapping(projectCtrl.comment)"
                                                        style="width:208%">
                                                        <!-- from collecticons.io-->
                                                        <?xml version="1.0" encoding="utf-8"?>
                                                        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
                                                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="12px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
                                                        <path id="stop-mapping" fill="#ffffff"  d="m160,352l192,0l0,-192l-192,0l0,192zm96,-352c-141.4,0 -256,114.6 -256,256s114.6,256 256,256s256,-114.6 256,-256s-114.6,-256 -256,-256zm135.8,391.8c-36.3,36.2 -84.5,56.2 -135.8,56.2s-99.5,-20 -135.8,-56.2c-36.2,-36.3 -56.2,-84.5 -56.2,-135.8s20,-99.5 56.2,-135.8c36.3,-36.2 84.5,-56.2 135.8,-56.2s99.5,20 135.8,56.2c36.2,36.3 56.2,84.5 56.2,135.8s-20,99.5 -56.2,135.8z"/>
                                                        </svg>
                                                        {{ ' Stop Mapping' | translate }}
                                                </button>
                                            </li>
                                                    
                                            <li>
                                                <button id="complete-mapping-btn" class="button"
                                                        ng-click="projectCtrl.unLockTaskMapping(projectCtrl.comment, 'MAPPED')"
                                                        style="width:132%">
                                                        <!-- from collecticons.io-->
                                                        <?xml version="1.0" encoding="utf-8"?>
                                                        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
                                                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="12px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
                                                        <polygon id="complete-mapping" fill="#ffffff"  points="197.43961906433105,462.2024230957031 19.373008728027344,284.13482666015625 62.93051719665527,240.57638549804688 192.86768913269043,370.5115966796875 448.51847648620605,58.048545837402344 496.1955394744873,97.0572280883789 " id="svg_2" fill="#ffffff" fill-opacity="1" stroke="#ffffff" stroke-opacity="1" stroke-width="11"/>
                                                        </svg>
                                                        <!-- <i class="icon-sm-tick"></i> -->
                                                        {{ ' Mark as Completely Mapped' | translate }}
                                                </button>
                                            </li>
                                            
                                        </ul>
                                        
                                        <div ng-show="projectCtrl.taskUnLockError">
                                            <div>
                                                <div class="error" role="alert">
                                                    <p>{{ 'There was a problem unlocking the task.' | translate }} {{ projectCtrl.taskUnLockErrorMessage }}</p>
                                                </div>
                                            </div>
                                            <!-- <button class="button button--achromic button--secondary"
                                                    ng-click="projectCtrl.resetToSelectingStep()">
                                                {{ 'Cancel' | translate }}
                                            </button> -->
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div ng-show="projectCtrl.currentTab === 'validation'">
                            <!-- select UI -->
                            <div ng-show="projectCtrl.validatingStep === 'selecting'">
                                <div>
                                    <h3>{{ 'Validation' | translate }}</h3>
                                    <div ng-hide="projectCtrl.user"
                                            class="alert alert--warning"
                                            role="alert">
                                        <p>In order to start contributing, please <a ng-show="!accountNavCtrl.account.username" ng-click="accountNavCtrl.login()">login first</a>.</p>
                                    </div>
                                    <div ng-show="projectCtrl.user && !projectCtrl.userCanValidate"
                                            class="alert alert--warning"
                                            role="alert">
                                        <p>{{ 'You cannot select tasks for validation on this project because you do not have the Validator role.' | translate }}</p>
                                    </div>
                                    <div ng-show="projectCtrl.userCanValidate">
                                        <p class="description--block">{{ 'Find a task for validation through one of the options below.' | translate }}</p>
                                        <div ng-show="projectCtrl.taskErrorValidation === 'none-available'">
                                            <div class="error" role="alert">
                                                <p>{{ 'There are no tasks currently available for validation.' | translate }}</p>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.taskErrorValidation === 'task-get-error'">
                                            <div class="error" role="alert">
                                                <p>{{ 'There was an error retrieving the task from the server.' | translate }}</p>
                                                <a class="alert__button-dismiss"
                                                        title="{{ 'Dismiss alert' | translate }}"
                                                        ng-click="projectCtrl.clearCurrentSelection()">
                                                    <span>{{ 'Dismiss' | translate }}</span>
                                                </a>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.taskLockError && projectCtrl.isAuthorized">
                                            <div class="error" role="alert">
                                                <p>{{ 'The tasks could not be locked.' | translate }} {{ projectCtrl.taskLockErrorMessage }}</p>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.taskLockError && !projectCtrl.isAuthorized">
                                            <div class="alert" role="alert">
                                                <p>{{ 'Please login first.' | translate }}</p>
                                            </div>
                                        </div>
                                        <dl class="definition-list--options">
                                            <dt>{{ 'Option 1:' | translate }}</dt>
                                            <dd>{{ 'Select a task by clicking on the map' | translate }}</dd>

                                            <dt>{{ 'Option 2:' | translate }} </dt>
                                            <dd>
                                                <button ng-click="projectCtrl.selectRandomTaskValidate()"
                                                        class="button">
                                                    {{ 'Validate a Random Task' | translate }}
                                                </button>
                                            </dd>

                                            <dt>{{ 'Option 3:' | translate }} </dt>
                                            <dd class="button-group--stacked">
                                                <button ng-click="projectCtrl.selectByPolygonValidate()"
                                                        class="button button--achromic"
                                                        ng-class="projectCtrl.drawPolygonInteraction.getActive() ? 'button--active' : ''">
                                                    {{ 'Select area by drawing a polygon' | translate }}
                                                </button>
                                                <button class="button"
                                                        ng-class="projectCtrl.selectedTasksForValidation.length < 1 ? 'disabled' : '' "
                                                        ng-click="projectCtrl.lockTasksForValidation(projectCtrl.selectedTasksForValidation)">
                                                    {{ 'Start Validating' | translate }}
                                                </button>
                                            </dd>

                                            <dt>{{ 'Option 4:' | translate }} </dt>
                                            <dd>
                                                <button ng-click="projectCtrl.reselectTasksForValidation()"
                                                        ng-class="projectCtrl.hasTasksLockedForValidation() ? '' : 'disabled'"
                                                        class="button">
                                                    {{ 'Reselect tasks locked for validation ' | translate }}
                                                </button>
                                            </dd>

                                            <dt>{{ 'Option 5:' | translate }} </dt>
                                            <dd>{{ 'Select by user below' | translate }}</dd>

                                        </dl>
                                        <table class="table table-validate_user table--zebra user-activity-for-validation">
                                            <thead>
                                            <tr>
                                                <th ng-click="projectCtrl.sortBy('username')"><a
                                                        class="table__sort table__sort--none"
                                                        title="{{ 'Sort column' | translate }}"><span>{{ 'Contributor' | translate }}</span></a>
                                                </th>
                                                <th ng-click="projectCtrl.sortBy('mappingLevel')"><a
                                                        class="table__sort table__sort--none"
                                                        title="{{ 'Sort column' | translate }}"><span>{{ 'Level' | translate }}</span></a>
                                                </th>
                                                <th ng-click="projectCtrl.sortBy('mappedTaskCount')"><a
                                                        class="table__sort table__sort--none"
                                                        title="{{ 'Sort column' | translate }}"><span>#</span></a>
                                                </th>
                                                <th ng-click="projectCtrl.sortBy('dateRegistered')"><a
                                                        class="table__sort table__sort--none"
                                                        title="{{ 'Sort column' | translate }}"><span>{{ 'Registered' | translate }}</span></a>
                                                </th>
                                                <th ng-click="projectCtrl.sortBy('lastValidationDate')"><a
                                                        class="table__sort table__sort--none"
                                                        title="{{ 'Sort column' | translate }}"><span>{{ 'Last validation' | translate }}</span></a>
                                                </th>
                                                <th><span>{{ 'Lock' | translate }}</span></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="doneTasks in projectCtrl.mappedTasksPerUser | orderBy:projectCtrl.propertyName:projectCtrl.reverse">
                                                <td>
                                                    <a href="./user/{{ doneTasks.username }}"/>{{ doneTasks.username }}
                                                </td>
                                                <td ng-show="doneTasks.mappingLevel === 'BEGINNER'">{{ 'Beginner' | translate }}</td>
                                                <td ng-show="doneTasks.mappingLevel === 'INTERMEDIATE'">{{ 'Intermediate' | translate }}</td>
                                                <td ng-show="doneTasks.mappingLevel === 'ADVANCED'">{{ 'Advanced' | translate }}</td>
                                                <td>{{ doneTasks.mappedTaskCount }}</td>
                                                <td><span am-time-ago="doneTasks.dateRegistered | amUtc | amLocal"></span>
                                                </td>
                                                <td><span
                                                        am-time-ago="doneTasks.lastValidationDate | amUtc | amLocal"></span>
                                                </td>
                                                <td>
                                                    <a class="normallink"
                                                            ng-click="projectCtrl.lockTasksForValidation(doneTasks.tasksMapped)"
                                                            ng-mouseover="projectCtrl.highlightTasks(doneTasks.tasksMapped, true)"
                                                            ng-mouseleave="projectCtrl.highlightVectorLayer.getSource().clear()">
                                                        {{ 'Start' | translate }}
                                                    </a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!-- task viewing and mapping UI's -->
                            <div ng-show="projectCtrl.validatingStep === 'viewing' || projectCtrl.validatingStep === 'locked' || projectCtrl.validatingStep === 'multi-locked'">
                                <!-- task viewing UI -->
                                <h3 style="display: inline-block;">{{ 'Validation' | translate }}</h3>
                                <div ng-show="projectCtrl.validatingStep === 'locked'" style="display: inline-block; float: right;">
                                    <i class="fa fa-clock-o"></i>
                                    <span>{{ projectCtrl.getLockTime() }} {{ ' left' | translate }}</span>
                                </div>
                                <div ng-show="projectCtrl.validatingStep === 'viewing' ">
                                    <!-- task information -->

                                    <div ng-show="projectCtrl.taskLockError && projectCtrl.isAuthorized">
                                        <div class="alert alert--danger" role="alert">
                                            <p>{{ 'The task could not be locked for validation.' | translate }} {{ projectCtrl.taskLockErrorMessage }}</p>
                                        </div>
                                    </div>
                                    <div ng-show="projectCtrl.wasAutoUnlocked">
                                        <div class="error" role="alert">
                                            <p>{{ 'The task expired and was automatically unlocked.' | translate }}</p>
                                        </div>
                                    </div>
                                    <div ng-show="projectCtrl.taskLockError && !projectCtrl.isAuthorized">
                                        <div class="alert alert--danger" role="alert">
                                            <p>{{ 'Please login first.' | translate }}</p>
                                        </div>
                                    </div>
                                    <div ng-hide="projectCtrl.taskLockError">
                                        <div ng-show="projectCtrl.selectedTaskData">
                                            <div ng-show="projectCtrl.isSelectedValidatable && !projectCtrl.taskLockError && projectCtrl.userCanValidate"
                                                    class="alert alert--success"
                                                    role="alert">
                                                <p>{{ 'This task is available for validation.' | translate }}</p>
                                            </div>
                                        </div>
                                        <!-- task error alerts -->
                                        <div>
                                            <div ng-hide="projectCtrl.user">
                                                <div class="alert alert--warning" role="alert">
                                                    <p>{{ 'Please login to start validating.' | translate }}</p>
                                                </div>
                                            </div>
                                            <div ng-show="projectCtrl.user && !projectCtrl.isSelectedValidatable"
                                                    class="error"
                                                    role="alert">
                                                <p>{{ 'The selected task is not in a state that allows validation.' | translate }}</p>
                                            </div>
                                            <div ng-show="projectCtrl.user && projectCtrl.taskLockError"
                                                    class="alert alert--danger"
                                                    role="alert">
                                                <p>{{ 'The selected task could not be locked.' | translate }}</p>
                                            </div>
                                            <div ng-show="projectCtrl.user && !projectCtrl.userCanValidate"
                                                    class="alert alert--danger"
                                                    role="alert">
                                                <p>{{ 'You do not have the required Validator role for validation on this project.' | translate }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- task action buttons -->
                                    <div class="form__group form__group--section">
                                        <div>
                                            <button ng-show="projectCtrl.isSelectedValidatable && !projectCtrl.taskLockError && projectCtrl.userCanValidate"
                                                    class="button button--large"
                                                    ng-click="projectCtrl.lockSelectedTaskValidation()">
                                                {{ 'Start Validating' | translate }}
                                            </button>
                                            <!-- <button ng-click="projectCtrl.startEditor('ideditor')"
                                                    class="button button--achromic  button--large">
                                                {{ 'Preview Task on OSM' | translate }}
                                            </button> -->
                                        </div>
                                        <div>
                                            <div class="button-group button-group--horizontal" role="group"
                                                    aria-label="{{ 'Other options' | translate }}">
                                                <button ng-hide="projectCtrl.taskErrorMapping === 'none-available' || !projectCtrl.userCanValidate"
                                                        ng-click="projectCtrl.selectRandomTaskValidate()"
                                                        class="button button--achromic">
                                                    {{ 'Select another task' | translate }}
                                                </button>
                                                <button ng-show="projectCtrl.selectedTaskData.isUndoable"
                                                        class="button button--achromic"
                                                        ng-click="projectCtrl.undo()">
                                                        {{ 'Un-Mark' | translate }}
                                                </button>
                                                <!-- <button class="button button--achromic button--secondary"
                                                        ng-click="projectCtrl.resetToSelectingStep()">
                                                    {{ 'Cancel' | translate }}
                                                </button> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- task locked UI -->
                                <div ng-show="projectCtrl.validatingStep === 'locked'"><!-- task mapping UI -->
                                    <div class="form__group form__group--section">
                                        <div ng-show="projectCtrl.selectedTaskData.perTaskInstructions">
                                            <h4>{{ 'Extra Instructions' | translate }}</h4>
                                            <p markdown-to-html="projectCtrl.selectedTaskData.perTaskInstructions"></p>
                                        </div>
                                        <div>
                                            <h6>{{ 'Get started by choosing your editor of choice.' | translate }}</h6>
                                            <div class="form__input-group">
                                                <select class="form__control form__control__medium"
                                                        ng-options="editor.value as editor.name for editor in projectCtrl.validationEditors"
                                                        ng-model="projectCtrl.selectedValidationEditor"
                                                        ng-change="projectCtrl.updatePreferedEditor()">
                                                </select>
                                                <span class="form__input-group-button">
                                                    <button class="button button--sm"
                                                            ng-click="projectCtrl.startEditor(projectCtrl.selectedValidationEditor)">
                                                            {{ 'Start Editor' | translate }}
                                                    </button>
                                                </span>
                                            </div>
                                        </div>
                                        <div>
                                            <p><a href="{{ projectCtrl.getGpxDownloadURL() }}" target="_blank">{{ 'Download' | translate }}</a> {{ 'this task as a gpx file to see its boundary.' | translate }}</p>
                                        </div>
                                        <div ng-show="projectCtrl.editorStartError === 'josm-error'">
                                            <div class="alert alert--danger" role="alert">
                                                <button class="alert__button-dismiss" title="{{ 'Dismiss alert' | translate }}"
                                                        ng-click="projectCtrl.editorStartError = ''">
                                                    <span>{{ 'Dismiss' | translate }}</span>
                                                </button>
                                                <p>{{ 'JOSM remote control did not respond. Do you have JOSM running and configured to be controlled remotely?' | translate }}</p>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.editorStartError === 'josm-imagery-error'">
                                            <div class="alert alert--warning" role="alert">
                                                <button class="alert__button-dismiss" title="{{ 'Dismiss alert' | translate }}"
                                                        ng-click="projectCtrl.editorStartError = ''">
                                                    <span>{{ 'Dismiss' | translate }}</span>
                                                </button>
                                                <p>{{ 'JOSM had a problem loading the project imagery.' | translate }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form__group form__group--section">
                                        <h6>{{ 'Done editing? Leave a comment and select one of the options below that matches your editing status.' | translate }}</h6>
                                        <div ng-include="'/app/project/comment-box.html'"></div>
                                        <ul class="list-type--none buttons--sidebyside">
                                            <li>
                                                <button class="button"
                                                        ng-click="projectCtrl.unLockTaskValidation(projectCtrl.comment, 'VALIDATED')">
                                                    {{ 'Mark as Valid' | translate }}
                                                </button>
                                            </li>
                                            <li>
                                                <button class="button button--secondary"
                                                        ng-click="projectCtrl.unLockTaskValidation(projectCtrl.comment, 'INVALIDATED')">
                                                    {{ 'Mark as Invalid' | translate }}
                                                </button>
                                            </li>
                                            <li>
                                                <button class="button button--achromic button--outline--secondary"
                                                        ng-click="projectCtrl.stopValidating(projectCtrl.comment)">
                                                    {{ 'Stop Validating' | translate }}
                                                </button>
                                            </li>
                                        </ul>
                                    </div>
                                    <div ng-show="projectCtrl.taskUnLockError">
                                        <div>
                                            <div class="error" role="alert">
                                                <p>{{ 'There was a problem unlocking the task.' | translate }} {{ projectCtrl.taskUnLockErrorMessage }}</p>
                                            </div>
                                        </div>
                                        <!-- <button class="button button--achromic"
                                                ng-click="projectCtrl.resetToSelectingStep()">
                                            {{ 'Cancel' | translate }}
                                        </button> -->
                                    </div>

                                </div>
                                <div ng-show="projectCtrl.validatingStep === 'multi-locked'">
                                    <p>Multiple Tasks are locked for you for validation.</p>
                                    <p>{{ 'Tasks' | translate }} {{ projectCtrl.getSelectTaskIds() }}
                                        {{ 'are locked for validation.' | translate }}
                                    </p>
                                    <div class="form__group form__group--section">
                                        <div>
                                            <h6>{{ 'Get started by choosing your editor of choice.' | translate }}</h6>
                                            <div class="form__input-group">
                                                <select class="form__control form__control__medium"
                                                        ng-options="editor.value as editor.name for editor in projectCtrl.validationEditors"
                                                        ng-model="projectCtrl.selectedValidationEditor"
                                                        ng-change="projectCtrl.updatePreferedEditor()">
                                                </select>
                                                <span class="form__input-group-button">
                                                    <button class="button button--sm"
                                                            ng-click="projectCtrl.startEditor(projectCtrl.selectedValidationEditor)">
                                                        {{ 'Start Editor' | translate }}
                                                    </button>
                                                </span>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.editorStartError === 'josm-error'">
                                            <div class="alert alert--danger" role="alert">
                                                <button class="alert__button-dismiss" title="{{ 'Dismiss alert' | translate }}"
                                                        ng-click="projectCtrl.editorStartError = ''">
                                                    <span>{{ 'Dismiss' | translate }}</span>
                                                </button>
                                                <p>{{ 'JOSM remote control did not respond. Do you have JOSM running and configured to be controlled remotely?' | translate }}</p>
                                            </div>
                                        </div>
                                        <div ng-show="projectCtrl.editorStartError === 'josm-imagery-error'">
                                            <div class="alert alert--warning" role="alert">
                                                <button class="alert__button-dismiss" title="{{ 'Dismiss alert' | translate }}"
                                                        ng-click="projectCtrl.editorStartError = ''">
                                                    <span>{{ 'Dismiss' | translate }}</span>
                                                </button>
                                                <p>{{ 'JOSM had a problem loading the project imagery.' | translate }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form__group form__group--section">
                                        <h6>{{ 'Done editing? Leave a comment and select one of the options below that matches your editing status.' | translate }}</h6>
                                        <div ng-include="'/app/project/comment-box.html'"></div>
                                        <ul class="list-type--none buttons--sidebyside">
                                            <li>
                                                <button class="button"
                                                        ng-click="projectCtrl.unLockMultiTaskValidation(projectCtrl.comment, 'VALIDATED')">
                                                    {{ 'Mark all as Valid' | translate }}
                                                </button>
                                            </li>
                                            <li>
                                                <button class="button button--secondary"
                                                        ng-click="projectCtrl.unLockMultiTaskValidation(projectCtrl.comment, 'INVALIDATED')">
                                                    {{ 'Mark all as Invalid' | translate }}
                                                </button>
                                            </li>
                                            <li>
                                                <button class="button button--achromic button--outline--secondary"
                                                        ng-click="projectCtrl.stopMultiTaskValidation(projectCtrl.comment)">
                                                    {{ 'Stop Validating' | translate }}
                                                </button>
                                            </li>
                                        </ul>
                                    </div>
                                    <div ng-show="projectCtrl.taskUnLockError">
                                        <div>
                                            <div class="alert alert--danger" role="alert">
                                                <p>{{ 'There was a problem unlocking the tasks.' | translate }} {{ projectCtrl.taskUnLockErrorMessage }}</p>
                                            </div>
                                        </div>
                                        <!-- <button class="button button--achromic"
                                                ng-click="projectCtrl.resetToSelectingStep()">
                                            {{ 'Cancel' | translate }}
                                        </button> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-show="projectCtrl.currentTab === 'chat'">
                            <h3>{{ 'Project Questions and Comments' | translate }}</h3>
                            <project-chat project-id="projectCtrl.id"
                                            project-author="projectCtrl.projectData.author"></project-chat>
                        </div>
                        <!-- advanced options UI -->

                        <div ng-init="showAdvanced=false"
                                ng-show="projectCtrl.selectedTaskData && (projectCtrl.currentTab === 'mapping' || projectCtrl.currentTab === 'validation') ">
                            <div>
                                <h5>{{ 'History' | translate }}</h5>
                                <div class="history">
                                    <p ng-show="projectCtrl.selectedTaskData.taskHistory.length < 1">{{ 'Nothing has happened yet.' | translate }}</p>
                                    <table ng-show="projectCtrl.selectedTaskData.taskHistory.length >= 1" class="table table-task-history">
                                        <tbody ng-repeat="item in (orderedData = (projectCtrl.selectedTaskData.taskHistory | orderBy: '-actionDate')) track by $index">
                                            <tr ng-show="item.actionBy !== orderedData[$index - 1].actionBy"
                                                class="new-user-row">
                                                <td colspan="2">
                                                    <a href="/user/{{ item.actionBy }}">{{ item.actionBy }}</a>
                                                </td>
                                            </tr>
                                            <tr class="action-row {{ item.action | lowercase }} {{ projectCtrl.highlightHistory && projectCtrl.highlightHistory === item.historyId ? 'highlighted' : '' }}">
                                                <td class="action">
                                                    <span class="status-marker-comment" ng-show="item.action === 'COMMENT'">{{ 'Commented' | translate }}</span>
                                                    <span class="status-marker-locked-for-mapping" ng-show="item.action === 'LOCKED_FOR_MAPPING'">{{ 'Locked for mapping' | translate }}</span>
                                                    <span class="status-marker-locked-for-validation" ng-show="item.action === 'LOCKED_FOR_VALIDATION'">{{ 'Locked for validation' | translate }}</span>
                                                    <span class="status-marker-auto-unlocked-for-mapping" ng-show="item.action === 'AUTO_UNLOCKED_FOR_MAPPING'">{{ 'Automatically unlocked for mapping' | translate }}</span>
                                                    <span class="status-marker-auto-unlocked-for-validation" ng-show="item.action === 'AUTO_UNLOCKED_FOR_VALIDATION'">{{ 'Automatically unlocked for validation' | translate }}</span>
                                                    <span class="status-marker-badimagery" ng-show="item.action === 'STATE_CHANGE' && item.actionText === 'BADIMAGERY'">{{ 'Marked as bad imagery' | translate }}</span>
                                                    <span class="status-marker-mapped" ng-show="item.action === 'STATE_CHANGE' && item.actionText === 'MAPPED'">{{ 'Mapped' | translate }}</span>
                                                    <span class="status-marker-validated" ng-show="item.action === 'STATE_CHANGE' && item.actionText === 'VALIDATED'">{{ 'Validated' | translate }}</span>
                                                    <span class="status-marker-invalidated" ng-show="item.action === 'STATE_CHANGE' && item.actionText === 'INVALIDATED'">{{ 'Invalidated' | translate }}</span>
                                                    <span class="status-marker-split" ng-show="item.action === 'STATE_CHANGE' && item.actionText === 'SPLIT'">{{ 'Split' | translate }}</span>
                                                    <span class="status-marker-ready" ng-show="item.action === 'STATE_CHANGE' && item.actionText === 'READY'">{{ 'Marked as ready' | translate }}</span>
                                                </td>
                                                <td>
                                                    <span am-time-ago="item.actionDate | amUtc | amLocal"></span>
                                                    <span ng-if="projectCtrl.user.isExpert">
                                                    <a ng-show="projectCtrl.isAtticDateLive(item)" class="diff-control {{projectCtrl.selectedItem.actionDate === item.actionDate ? 'selected' : ''}}" ng-click="projectCtrl.selectItemForDiff(item)" title="{{ 'Choose two entries for diff or same once twice for attic data' | translate }}"></a>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr ng-show="item.action === 'COMMENT'">
                                            <td colspan="2" class="comment-text">
                                                <span markdown-to-html="item.actionText" ng-click="projectCtrl.onShortCodeClick($event)"></span>
                                            </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div>
                                <h5 ng-click="showAdvanced=!showAdvanced" class="pointer"
                                    title="{{ 'Show advanced options' | translate }}">
                                    <i ng-show="!showAdvanced"
                                        class="icon-sm-chevron-down"></i>
                                    <i ng-show="showAdvanced"
                                        class="icon-sm-chevron-up"></i>
                                    {{ 'Advanced' | translate }}
                                </h5>
                                <p class="indent--right">{{ 'Advanced task information and editing options' | translate }}</p>
                            </div>
                            <div class="indent--right" ng-show="showAdvanced">
                                <div>
                                    <h6>{{ 'Details' | translate }}</h6>
                                    <dl class="dl-horizontal">
                                        <dt>ID</dt>
                                        <dd>#{{ projectCtrl.selectedTaskData.taskId }}</dd>
                                        <dt>{{ 'Status' | translate }}</dt>
                                        <dd>{{ projectCtrl.selectedTaskData.taskStatus }}</dd>
                                        <dt>{{ 'Locked by' | translate }}</dt>
                                        <dd>{{ projectCtrl.selectedTaskData.lockHolder }}</dd>
                                    </dl>
                                </div>
                                <div>
                                    <h6>{{ 'Options' | translate }}</h6>
                                    <ul class="buttons--sidebyside list-type--none" role="group"
                                            aria-label="{{ 'Advanced options' | translate }}">
                                        <li>
                                            <button class="button button--achromic"
                                                    title="{{ 'See the changesets on the OSM website for this area.' | translate }}"
                                                    ng-click="projectCtrl.viewOSMChangesets()">
                                                {{ 'View OSM changesets' | translate }}
                                            </button>
                                        </li>
                                        <li>
                                            <button class="button button--achromic"
                                                    title="{{ 'See the changesets in Overpass Turbo for this area.' | translate }}"
                                                    ng-click="projectCtrl.viewOverpassTurbo()">
                                                {{ 'View in Overpass Turbo' | translate }}
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="map" class="map-container">
                    <div>
                        <div class="activity-project-button">
                            <a ng-href="/project/{{ projectCtrl.projectData.projectId }}/dashboard"
                            class="button button--secondary">{{ 'Activity and Stats' | translate }}
                            </a>
                        </div>
                    </div>
                    <div class="ol-control legend-control">
                        <h6>{{ 'Legend' | translate }}</h6>
                        <div>
                            <svg height="15" width="15">
                                <rect width="15" height="15" stroke="rgba(84, 84, 84, 0.7)" stroke-width="1"
                                    fill="rgba(223, 223, 223, 0.1)"/>
                            </svg>
                            {{ 'Ready' | translate }}
                        </div>
                        <div>
                            <svg height="15" width="15">
                                <rect width="15" height="15" stroke="rgba(84, 84, 84, 0.7)" stroke-width="1"
                                    fill="rgba(255, 198, 12, 0.4)"/>
                            </svg>
                            {{ 'Mapped' | translate }}
                        </div>
                        <div>
                            <svg height="15" width="15">
                                <rect width="15" height="15" stroke="rgba(84, 84, 84, 0.7)" stroke-width="1"
                                    fill="rgba(0, 0, 0, 0.4)"/>
                            </svg>
                            {{ 'Bad imagery' | translate }}
                        </div>
                        <div>
                            <svg height="15" width="15">
                                <rect width="15" height="15" stroke="rgba(84, 84, 84, 0.7)" stroke-width="1"
                                    fill="rgba(0, 128, 0, 0.4)"/>
                            </svg>
                            {{ 'Validated' | translate }}
                        </div>
                        <div>
                            <svg height="15" width="15">
                                <rect width="15" height="15" stroke="rgba(84, 84, 84, 0.7)" stroke-width="1"
                                    fill="rgba(233, 11, 67, 0.4)"/>
                            </svg>
                            {{ 'Invalidated' | translate }}
                        </div>
                        <div>
                            <svg height="15" width="15">
                                <rect width="20" height="20" stroke="rgba(84, 84, 84, 0.7)" stroke-width="1"
                                    fill="rgba(18, 89, 240, 0.4)"/>
                            </svg>
                            {{ 'Locked' | translate }}
                        </div>
                        <div>
                            <svg height="15" width="15">
                                <rect width="15" height="15" stroke="rgba(18, 89, 240, 1)" stroke-width="5"
                                    fill="rgba(18, 89, 240, 0.4)"/>
                            </svg>
                            {{ 'Locked by you' | translate }}
                        </div>
                        <div ng-show="projectCtrl.hasPriorityArea">
                            <svg height="15" width="15">
                                <rect width="15" height="15" stroke="rgba(255, 0, 0, 1)" stroke-width="3"
                                    fill="rgba(255, 0, 0, 0.3)"/>
                            </svg>
                            {{ 'Priority area' | translate }}
                        </div>
                    </div>
                </div>
            </div>    
        </div>
    </section>
</div>

-<!-- accept license modal -->
<section class="modal modal-tm" ng-show="projectCtrl.showLicenseModal">
    <div class="modal__inner">
        <header class="modal__header">
            <div class="modal__headline">
                <h1 class="modal__title">{{ 'Accept imagery license' | translate }}</h1>
            </div>
        </header>
        <div class="modal__body">
            <p>{{ 'You need to accept the license before continuing.' | translate }}</p>
            <hr>
            <h4>{{ projectCtrl.license.name }}</h4>
            <p>{{ projectCtrl.license.description }}</p>
            <p>{{ projectCtrl.license.plainText }}</p>
        </div>
        <footer class="modal__footer">
            <div ng-hide="projectCtrl.validateTasksSuccess">
                <button class="button button--achromic" type="button"
                        ng-click="projectCtrl.setShowLicenseModal(false)">
                    {{ 'Cancel' | translate }}
                </button>
                <button class="button button--base" type="button"
                        ng-click="projectCtrl.acceptLicense()">
                    {{ 'Accept and continue' | translate }}
                </button>
            </div>
        </footer>
    </div>
    <button class="modal__button-dismiss" title="{{ 'Close' | translate }}"
            ng-click="projectCtrl.setShowLicenseModal(false)">
        {{ 'Dismiss' | translate }}
    </button>
</section>
<!-- accept license modal -->

<!-- JOSM editor failed modal -->
<section class="modal modal-tm" ng-show="projectCtrl.editorStartError === 'josm-error'">
    <div class="modal__inner">
        <header class="modal__header">
            <div class="modal__headline">
                <h3 class="modal__title">{{ 'Contact with JOSM Failed' | translate }}</h3>
            </div>
        </header>
        <div class="modal__body">
            <div>
                <p>
                    {{ 'JOSM remote control did not respond. Do you have JOSM running and configured to be controlled remotely?' | translate }}
                </p>
            </div>
        </div>
        <footer class="modal__footer">
            <div>
                <button class="button" type="button"
                        ng-click="projectCtrl.editorStartError = ''">{{ 'Dismiss' | translate }}
                </button>
                <button class="button button--secondary" type="button"
                        ng-click="projectCtrl.resetSelectedEditor()">{{ "Stop using JOSM" | translate }}
                </button>
            </div>
        </footer>
    </div>
    <a class="modal__button-dismiss" title="{{ 'Close' | translate }}" ng-click="projectCtrl.editorStartError = ''">
        {{ 'Dismiss' | translate }}
    </a>
</section>
<!-- JOSM editor failed modal -->
